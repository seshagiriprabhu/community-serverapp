{% extends "static/base2.html" %}
{% load leaflet_tags %}
{% block title %}Community App Data Analyzer{% endblock %}
{% block script %}
{% leaflet_js %}
{% endblock script %}
{% block style %}
{% leaflet_css %}
<style>
body {
}
html, body, #spots {
    height: 100%;
    width: 100%;
    min-height: 600px;
}
</style>
{% endblock style %}
{% block body %}
<script type="text/javascript">
function main_map_init (map, options) {
    {% for data in dbdata %}
    L.circle([{{ data.1 }}, {{ data.2 }}], {{ data.3 }}, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.3
    }).addTo(map).bindPopup("<b>{{ data.0 }}</b>");
    {% endfor %}
    var popup = L.popup();
    function onMapClick(e) {
        popup
            .setLatLng(e.latlng)
            .setContent("You clicked the map at " + e.latlng.toString())
            .openOn(map);
    }
    map.on('click', onMapClick);
}
</script>
{% leaflet_map "spots" callback="window.main_map_init" %}
{% endblock body %}
